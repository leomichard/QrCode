<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <link rel="icon" href="assets/imgs/favicon.ico" type="image/x-icon">
    <title>Quartz Qr Scan</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Supabase Core -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="assets/app-api.js"></script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="assets/app.css"/>
</head>

<body data-page="register" class="min-h-screen">
<div id="site-header"></div>

<main class="max-w-6xl mx-auto px-4 py-10">
    <div class="max-w-4xl mx-auto">
        <h1 class="ty-headline">Create A Workshop</h1>
        <p class="ty-body-2 mt-2 text-slate-600">
            Identification: Email First, Then Phone Or Line (Ui Only For Now).
        </p>

        <div class="mt-6 grid md:grid-cols-2 gap-6">
            <section class="card p-6">
                <div class="ty-overline text-slate-500">Step 1</div>
                <div class="ty-subtitle-1 mt-1">Email</div>

                <div class="mt-5 space-y-4">
                    <div>
                        <label class="ty-subtitle-2">Workshop Name</label>
                        <input class="mt-2 w-full rounded-xl border border-slate-200 px-4 py-3 bg-white ty-body-2"
                               placeholder="Quartz Garage Lyon">
                    </div>

                    <div>
                        <label class="ty-subtitle-2">Email</label>
                        <input class="mt-2 w-full rounded-xl border border-slate-200 px-4 py-3 bg-white ty-body-2"
                               placeholder="owner@garage.com">
                    </div>

                    <div>
                        <label class="ty-subtitle-2">Password</label>
                        <input type="password"
                               class="mt-2 w-full rounded-xl border border-slate-200 px-4 py-3 bg-white ty-body-2"
                               placeholder="••••••••">
                    </div>

                    <button type="button" class="btn-primary w-full rounded-xl px-4 py-3 ty-subtitle-2">
                        Continue
                    </button>
                </div>
            </section>

            <section class="card p-6">
                <div class="ty-overline text-slate-500">Step 2</div>
                <div class="ty-subtitle-1 mt-1">Phone Or Line</div>
                <p class="ty-caption mt-2 text-slate-500">Red Links Are Reserved For White Background
                    (Accessibility).</p>

                <div class="mt-5 space-y-4">
                    <div class="rounded-2xl border border-slate-200 bg-slate-50 p-4">
                        <div class="ty-subtitle-2">Phone (Otp)</div>
                        <div class="mt-3 grid grid-cols-3 gap-3">
                            <input class="col-span-1 rounded-xl border border-slate-200 px-4 py-3 bg-white ty-body-2"
                                   placeholder="+33">
                            <input class="col-span-2 rounded-xl border border-slate-200 px-4 py-3 bg-white ty-body-2"
                                   placeholder="6 12 34 56 78">
                        </div>
                        <div class="mt-3 flex gap-3">
                            <button type="button" class="btn-primary flex-1 rounded-xl px-4 py-3 ty-subtitle-2">Send
                                Otp
                            </button>
                            <button type="button" class="btn-ghost rounded-xl px-4 py-3 ty-subtitle-2">Verify</button>
                        </div>
                    </div>

                    <div class="rounded-2xl border border-slate-200 bg-white p-4">
                        <div class="ty-subtitle-2">Line Account</div>
                        <p class="ty-caption mt-2 text-slate-500">Oauth Connection (Backend Later).</p>
                        <button type="button" class="mt-3 btn-ghost w-full rounded-xl px-4 py-3 ty-subtitle-2">
                            Continue With Line
                        </button>
                    </div>

                    <div class="ty-body-2 text-slate-600">
                        Already Have An Account? <a class="a-red" href="login.html">Sign In</a>
                    </div>
                </div>
            </section>
        </div>
    </div>
</main>

<div id="site-footer"></div>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="assets/supabase-client.js"></script>
<script src="assets/app-api.js"></script>
<script src="assets/include.js"></script>
<script>
    (async () => {
        const form = document.querySelector("form");
        if (!form) return;

        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            const fullName = (document.querySelector('[name="full_name"]')?.value || "").trim();
            const email = (document.querySelector('[name="email"]')?.value || "").trim();
            const password = (document.querySelector('[name="password"]')?.value || "").trim();

            if (!fullName || !email || !password) {
                alert("Please Fill In Full Name, Email, And Password.");
                return;
            }

            try {
                await signUpWithEmailPassword(fullName, email, password);

                // If email confirmation is OFF, user is ready to login immediately
                alert("Account Created. You Can Sign In Now.");
                window.location.href = "login.html";
            } catch (err) {
                alert(err.message || "Sign Up Failed.");
            }
        });
    })();
</script>

</body>
</html>
