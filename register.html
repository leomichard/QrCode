<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Register</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@600&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="assets/app.css" />
</head>

<body>
<div id="site-header"></div>

<main style="max-width:520px;margin:0 auto;padding:10px 16px 30px;">
    <section class="card" style="padding:22px;">
        <h1 class="ty-headline">Create Account</h1>
        <p class="ty-body-2" style="margin-top:6px;color:#55666A;">
            Register With Your Email And Password.
        </p>

        <form id="registerForm" style="margin-top:14px;display:grid;gap:10px;">
            <input class="input ty-body-2" name="full_name" placeholder="Full Name" autocomplete="name" />
            <input class="input ty-body-2" name="email" placeholder="Email" autocomplete="email" />
            <input class="input ty-body-2" name="password" type="password" placeholder="Password" autocomplete="new-password" />

            <button class="btn btn-primary ty-button" type="submit">Register</button>

            <p class="ty-caption" style="color:#7A8C92;">
                Already Have An Account? <a class="link" href="login.html">Login</a>
            </p>
        </form>
    </section>
</main>

<div id="site-footer"></div>

<script src="assets/app-state.js"></script>
<script src="assets/supabase-client.js"></script>
<script src="assets/auth.js"></script>
<script src="assets/app-api.js"></script>
<script src="assets/include.js"></script>

<script>
    document.getElementById("registerForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const f = e.target;

        const fullName = f.full_name.value.trim();
        const email = f.email.value.trim();
        const password = f.password.value.trim();

        if (!fullName || !email || !password) {
            alert("Please Fill In All Fields.");
            return;
        }

        try {
            await signUp(fullName, email, password);
            alert("Account Created. You Can Login Now.");
            window.location.href = "login.html";
        } catch (err) {
            alert(err.message || "Register Failed.");
        }
    });
</script>
</body>
</html>
