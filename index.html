<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <link rel="icon" href="assets/imgs/favicon.ico" type="image/x-icon">
    <title>Quartz QR</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@600&family=Roboto:wght@400;500&display=swap"
          rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <link rel="stylesheet" href="assets/app.css"/>
</head>

<body>
<div id="site-header"></div>

<main style="max-width:1100px;margin:0 auto;padding:10px 16px 30px;">
    <section class="card" style="padding:22px;">
        <h1 class="ty-headline">Quartz Qr Scan</h1>
        <p class="ty-body-2" style="margin-top:6px;color:#55666A;">
            Secure One-Time Qr Codes With Points And Promotions.
        </p>
        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;">
            <a class="btn btn-primary ty-button" href="login.html" data-guest-only>Login</a>
            <a class="btn btn-outline ty-button" href="register.html" data-guest-only>Register</a>
        </div>
    </section>

    <section style="margin-top:18px;">
        <div style="display:flex;align-items:end;justify-content:space-between;gap:12px;flex-wrap:wrap;">
            <h2 class="ty-headline">Promotions Catalog</h2>
            <p class="ty-caption" style="color:#7A8C92;">Visible For Everyone, Even When Not Signed In. <br>
                <strong>A SUPPRIMER UNE FOIS LE SITE TERMINE</strong>

            </p>
        </div>

        <div data-promotions-grid class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-3"></div>
    </section>
</main>


<div id="site-footer"></div>

<script src="assets/app-state.js"></script>
<script src="assets/supabase-client.js"></script>
<script src="assets/auth.js"></script>
<script src="assets/app-api.js"></script>
<script src="assets/include.js"></script>

<script>
    (async () => {
        // Promotions are public. For unlock display, use shop points if logged in.
        const promos = await listPublicPromotions();
        const shop = await getShopTotal(); // returns null if not signed in
        const shopPoints = shop?.shop_points ?? 0;
        renderPromotions("[data-promotions-grid]", promos, shopPoints);
    })();
</script>
</body>
</html>
